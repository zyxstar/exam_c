#ifndef _BLOCK_H_
#define _BLOCK_H_

#define ROW 28                  // 游戏背景大小
#define COL 100

#define X 26                    // 游戏窗口大小
#define Y 24

#define LEVEL_SCORE 500         // 升一级所需的分数

#define DB           "./score"
#define ARRNUM(x)   (sizeof(x) / sizeof(x[0]))

// enum color {                    // 前景、背景颜色
// 	Fore_Black   = 30,
// 	Fore_Red     = 31,
// 	Fore_Green   = 32,
// 	Fore_Yellow  = 33,
// 	Fore_Blue    = 34,
// 	Fore_Magenta = 35,
// 	Fore_Cyan    = 36,
// 	Back_Black   = 40,
// 	Back_Red     = 41,
// 	Back_Green   = 42,
// 	Back_Yellow  = 43,
// 	Back_Blue    = 44,
// 	Back_Magenta = 45,
// 	Back_Cyan    = 46,
// 	Back_White   = 47,
// };

// static int x, y;                                        //   方块坐标
// static int num, mode, next_num, next_mode;              //   当前方块，跟下一个方块
// static int save_row, save_col, save_x, save_y, save_mode;// 保存坐标、方块形状
// static int draw[Y][X] = { 0 };                          //   保存方块坐标的数组
// static int color = 41;                                  //   方块颜色
// static int flag_erase;                                  //   擦除标志
// // jmp_buf env;
// static int level = 1;                                   //   游戏等级

// typedef struct itimerval LEVEL;
// static LEVEL level_00 = { {0,      0}, {0,      0} };
// static LEVEL level_01 = { {0, 800000}, {1,      0} };
// static LEVEL level_02 = { {0, 500000}, {0, 500000} };
// static LEVEL level_03 = { {0, 400000}, {0, 300000} };
// static LEVEL level_04 = { {0, 300000}, {0, 300000} };
// static LEVEL level_05 = { {0, 200000}, {0, 300000} };
// static LEVEL level_06 = { {0, 150000}, {0, 300000} };
// static LEVEL level_07 = { {0, 100000}, {0, 300000} };
// static LEVEL level_08 = { {0, 80000}, {0, 300000} };
// static LEVEL level_09 = { {0, 60000}, {0, 300000} };

struct info_t {                                         //   用户信息
	char name[20];
	int score;
}player;

static char fight[14][70] = {
                  "|-----------------------------------------------------|",
                  "|                                                     |",
                  "|                                                     |",
                  "|                                                     |",
                  "|      [][][] [] [][][] []  [] [][][] [] [] []        |",
                  "|      []     [] []     []  []   []   [] [] []        |",
                  "|      [][][] [] [][][] [][][]   []   [] [] []        |",
                  "|      []     [] []  [] []  []   []                   |",
                  "|      []     [] [][][] []  []   []   [] [] []        |",
                  "|                                                     |",
                  "|                                                     |",
                  "|                                                     |",
                  "|-----------------------------------------------------|",
};


static char over[17][60] = {
            "----------------------------------------------------------",
           "|                                                         |",
           "|          [][][][]   [][]   [][][][] [][][][]            |",
           "|          []        []  []  [] [] [] []                  |",
           "|          [] [][]  [][][][] [] [] [] [][][][]            |",
           "|          []    [] []    [] [] [] [] []                  |",
           "|          [][][][] []    [] [] [] [] [][][][]            |",
           "|                                                         |",
           "|                                                         |",
           "|           [[][]]  []    [] [][][][] [][][][]            |",
           "|          []    [] []    [] []       []    []            |",
           "|          []    [] []    [] [][][][] [][][][]            |",
           "|          []    []  []  []  []       [] []               |",
           "|           [[][]]    [][]   [][][][] []  [][]            |",
           "|                                                         |",
           "|---------------------------------------------------------|"
};


static char back[ROW][COL] = {
	        "==================================================",
	        "||                          ||                  ||",
	        "||                          || NAME:            ||",
	        "||    [][]                  ||                  ||",
	        "||    [][]                  || SCORE:           ||",
	        "||                 [][]     ||                  ||",
		    "||                   []     || LEVEL:           ||",
		    "||                   []     ||                  ||",
		    "||                          ||                  ||",
		    "||                          ||==================||",
		    "||                          ||                  ||",
		    "||                          || NEXT:            ||",
		    "||      1. NEW GAME         ||                  ||",
		    "||                          ||                  ||",
		    "||      2. HIGH SCORE       ||                  ||",
		    "||                          ||                  ||",
		    "||      3. EXIT             ||                  ||",
		    "||                          ||==================||",
		    "||    []                    ||                  ||",
		    "||    [][]                  || HIGHEST SCORE:   ||",
		    "||      []                  ||                  ||",
		    "||                        []|| NAME: ~Lee~      ||",
		    "||[][]      [][]        [][]||                  ||",
		    "||[][]    [][][] [][] [][]  || SCORE: 9000      ||",
		    "||[][][] [][][][][][] [][]  ||                  ||",
		    "==================================================",
            "|| Input Your Choose:                           ||",
            "==================================================",
};

static char back1[ROW][COL] = {
	        "==================================================",
	        "||                          ||                  ||",
	        "||                          || NAME:            ||",
	        "||                          ||                  ||",
	        "||                          || SCORE:           ||",
	        "||                          ||                  ||",
		    "||                          || LEVEL:           ||",
		    "||                          ||                  ||",
		    "||                          ||                  ||",
		    "||                          ||==================||",
		    "||                          ||                  ||",
		    "||                          || NEXT:            ||",
		    "||                          ||                  ||",
		    "||                          ||                  ||",
		    "||                          ||                  ||",
		    "||                          ||                  ||",
		    "||                          ||                  ||",
		    "||                          ||==================||",
		    "||                          ||                  ||",
		    "||                          || HIGHEST SCORE:   ||",
		    "||                          ||                  ||",
		    "||                          || NAME: ~Lee~      ||",
		    "||                          ||                  ||",
		    "||                          || SCORE: 9000      ||",
		    "||                          ||                  ||",
		    "==================================================",
            "||        go!                                   ||",
            "==================================================",
};
static const int shape[7][4][18] = {
            {{0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 0, 0, 1, 1, 1,     2, 1},   //
 	         {0, 0, 0, 0, 0, 0, 1, 0, 0, 0, 1, 1, 0, 0, 1, 0,     1, 2},   //   []   []    [][][]     []
	         {0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 1, 1, 0, 0, 1, 0,     2, 1},   // [][][] [][]    []     [][]
	         {0, 0, 0, 0, 0, 0, 0, 1, 0, 0, 1, 1, 0, 0, 0, 1,     1, 2}}, //         []               []

			{{0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 0, 1, 1, 1,     2, 1},   //
             {0, 0, 0, 0, 0, 0, 1, 0, 0, 0, 1, 0, 0, 0, 1, 1,     1, 2},   //       []           [][]
			 {0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 1, 1, 0, 1, 0, 0,     2, 1},   //    [] []   [][][]    []
			 {0, 0, 0, 0, 0, 0, 1, 1, 0, 0, 0, 1, 0, 0, 0, 1,     1, 2}}, // [][][] [][] []        []

			{{0, 0, 0, 0, 0, 0, 0, 1, 0, 0, 0, 1, 0, 0, 1, 1,     1, 2},   //
			 {0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 0, 0, 0, 1, 1, 1,     2, 1},   //       [][]           []
			 {0, 0, 0, 0, 0, 0, 1, 1, 0, 0, 1, 0, 0, 0, 1, 0,     1, 2},   //[]     []    [][][]   []
             {0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 1, 1, 0, 0, 0, 1,     2, 1}}, // [][][] []        [] [][]

			{{0, 0, 0, 0, 0, 0, 1, 0, 0, 0, 1, 1, 0, 0, 0, 1,     1, 2},   //
             {0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 1, 0, 1, 1, 0,     2, 1},   //    []
             {0, 0, 0, 0, 0, 0, 1, 0, 0, 0, 1, 1, 0, 0, 0, 1,     1, 2},   //    [][]     [][]
             {0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 1, 0, 1, 1, 0,     2, 1}}, //       []   [][]

			{{0, 0, 0, 0, 0, 0, 0, 1, 0, 0, 1, 1, 0, 0, 1, 0,     1, 2},   //
	         {0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 1, 0, 0, 0, 1, 1,     2, 1},   //      []
	         {0, 0, 0, 0, 0, 0, 0, 1, 0, 0, 1, 1, 0, 0, 1, 0,     1, 2},   //    [][]   [][]
	         {0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 1, 0, 0, 0, 1, 1,     2, 1}}, //     []       [][]

			{{0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 1, 0, 0, 1, 1,     2, 2},   //
             {0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 1, 0, 0, 1, 1,     2, 2},   //
             {0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 1, 0, 0, 1, 1,     2, 2},   //    [][]
             {0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 1, 0, 0, 1, 1,     2, 2}}, //     [][]

	    {{0, 0, 0, 1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 0, 0, 1,     0, 3},   //     []
             {0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 1, 1, 1,     3, 0},   //     []     [][][][]
             {0, 0, 0, 1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 0, 0, 1,     0, 3},   //     []
             {0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 1, 1, 1,     3, 0}}   //     []
};



static char High_Score[28][55] = {
	                "--------------------------------------------------",
	                "|                                                |",
		            "|                                                |",
		            "|                                                |",
		            "|        No. 1                                   |",
		            "|                                                |",
		            "|        No. 2                                   |",
		            "|                                                |",
		            "|        No. 3                                   |",
		            "|                                                |",
		            "|        No. 4                                   |",
		            "|                                                |",
		            "|        No. 5                                   |",
		            "|                                                |",
		            "|        No. 6                                   |",
		            "|                                                |",
		            "|        No. 7                                   |",
		            "|                                                |",
		            "|        No. 8                                   |",
		            "|                                                |",
		            "|        No. 9                                   |",
		            "|                                                |",
		            "|        No. 10                                  |",
		            "|        ...                                     |",
		            "|        ...                                     |",
		            "|                                                |",
		            "|                                                |",
		            "--------------------------------------------------"
};

void print_fight(void);
void print_shape(void);
void print_start(void);
void print_draw(void);
void init(void);
void change_shape(void);
void scan_key(void);
void move_left(void);
void move_right(void);
void move_down();
void store(void);
void erase_last(void);
void destroy(void);
void print_next(void);
void erase_next(void);
void game_over(void);
void change_level(void);
void print_playername(void);
void print_score(void);
void print_level(void);
void print_gameover(void);
void print_HighScore(void);
void fread_info();
int end();

#endif
