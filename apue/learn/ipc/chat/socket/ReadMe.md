
- 设计网络程序时，第一考虑的协议（应用层自定义的协议），其次才是架构与模块划分
- 设计协议时，要考虑在不合适时候接到数据，需要处理出错处理
- 设计协议时，要考虑服务端与客户端存在的不同状态，并做好状态流转图
- 状态机的流转放在一起，保证所有状态都可以看到，不要过分封装，而将状态改变放到其他函数时
- 登录验证是在另一个分离的线程中完成的，并新起了一个UPD连接到客户端进行通信
- 登录验证使用的包，必须是值拷贝过的，否则容易被新的连接所覆盖
- 为了防止恶意客户端可以猜到用户名，每次请求时，即使不存在该用户，也给其返回salt，只不过再次过来验证时不通过
- 传输字符串时，统一设计为没有尾0，接收后再加上尾0
- 网络传输的结构体中的类型一般为无符号整型（8，16，32位），每个结构体控制在以太帧的大小（1480字节）
- 复制字符串时，使用`snprintf`而不是`strncpy`，主要在于前者能得到复制的字符个数(不含`\0`)，方便发包时精准计算包的大小（如果发包时，指定包的结构体大小，则容易把内存中的数据发送给对方，存在安全隐患）
- 现在的makefile没有包含对头文件的依赖，一般项目问题不大，但如果开源时要考虑
- `database.h`中声明`extern void *server_online_db;`，它是一个接口，实现层中定义该变量并指向真正的存储（此处好像多此一举，但项目大了是有意义的）
- `client.c`中声明`extern char *crypt(const char *key, const char *salt);`是为了让编译不出警告







<!--
38
300
43.65
31.92
5
280
1200
265
4200
42
1126
720
-->
